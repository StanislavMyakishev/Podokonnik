{"remainingRequest":"/home/ksercs/Podokonnik/frontend/node_modules/babel-loader/lib/index.js!/home/ksercs/Podokonnik/frontend/node_modules/vuetify-loader/lib/loader.js!/home/ksercs/Podokonnik/frontend/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/ksercs/Podokonnik/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/ksercs/Podokonnik/frontend/src/components/pages/NewAd.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/ksercs/Podokonnik/frontend/src/components/pages/NewAd.vue","mtime":1564276365092},{"path":"/home/ksercs/Podokonnik/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1564276352946},{"path":"/home/ksercs/Podokonnik/frontend/node_modules/babel-loader/lib/index.js","mtime":1564276352906},{"path":"/home/ksercs/Podokonnik/frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1564276364612},{"path":"/home/ksercs/Podokonnik/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1564276352946},{"path":"/home/ksercs/Podokonnik/frontend/node_modules/vue-loader/lib/index.js","mtime":1564276364492}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport axios from 'axios';\nvar url = 'http://127.0.0.1:8000/api/ads/';\nexport default {\n  data: function data() {\n    return {\n      valid: true,\n      errors: [],\n      name: '',\n      descr: '',\n      price: '',\n      select: null,\n      items: [{\n        value: 1,\n        text: 'Продукты'\n      }, {\n        value: 2,\n        text: 'Электроника'\n      }],\n      nameRules: [function (v) {\n        return !!v || 'Назовите объявление';\n      }, function (v) {\n        return v && v.length >= 10 || 'Название объявления должно содержать минимум 10 символов';\n      }],\n      descrRules: [function (v) {\n        return !!v || 'Опишите объявление';\n      }],\n      priceRules: [function (v) {\n        return !!v || 'Введите цену объявления';\n      }, function (v) {\n        return v && !isNaN(v) && /^\\d+$/.test(v) || 'Цена должна быть целым числом';\n      }],\n      selectRules: [function (v) {\n        return !!v || \"Выберите категорию объявления\";\n      }]\n    };\n  },\n  methods: {\n    postPost: function postPost() {\n      var _this = this;\n\n      if (this.$refs.form.validate()) {\n        var date = new Date();\n        var ad = {\n          \"name\": this.name,\n          \"descr\": this.descr,\n          \"price\": this.price,\n          \"category\": this.select,\n          \"date\": \"\".concat(date.getFullYear(), \"-\").concat(date.getMonth(), \"-\").concat(date.getDate())\n        };\n        axios.post(url, JSON.stringify(ad), {\n          headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n          }\n        }).catch(function (e) {\n          _this.errors.push(e);\n        });\n      }\n    },\n    clear: function clear() {\n      this.name = '', this.descr = '', this.select = null, this.checkbox = false;\n    }\n  }\n};",{"version":3,"sources":["NewAd.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiEA,OAAA,KAAA,MAAA,OAAA;AACA,IAAA,GAAA,GAAA,gCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,KAAA,EAAA,IADA;AAEA,MAAA,MAAA,EAAA,EAFA;AAGA,MAAA,IAAA,EAAA,EAHA;AAIA,MAAA,KAAA,EAAA,EAJA;AAKA,MAAA,KAAA,EAAA,EALA;AAMA,MAAA,MAAA,EAAA,IANA;AAOA,MAAA,KAAA,EAAA,CACA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OADA,EAEA;AAAA,QAAA,KAAA,EAAA,CAAA;AAAA,QAAA,IAAA,EAAA;AAAA,OAFA,CAPA;AAWA,MAAA,SAAA,EAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,IAAA,qBAAA;AAAA,OADA,EAEA,UAAA,CAAA;AAAA,eAAA,CAAA,IAAA,CAAA,CAAA,MAAA,IAAA,EAAA,IAAA,0DAAA;AAAA,OAFA,CAXA;AAeA,MAAA,UAAA,EAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,IAAA,oBAAA;AAAA,OADA,CAfA;AAkBA,MAAA,UAAA,EAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,IAAA,yBAAA;AAAA,OADA,EAEA,UAAA,CAAA;AAAA,eAAA,CAAA,IAAA,CAAA,KAAA,CAAA,CAAA,CAAA,IAAA,QAAA,IAAA,CAAA,CAAA,CAAA,IAAA,+BAAA;AAAA,OAFA,CAlBA;AAsBA,MAAA,WAAA,EAAA,CACA,UAAA,CAAA;AAAA,eAAA,CAAA,CAAA,CAAA,IAAA,+BAAA;AAAA,OADA;AAtBA,KAAA;AAAA,GADA;AA2BA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,UAAA,KAAA,KAAA,CAAA,IAAA,CAAA,QAAA,EAAA,EAAA;AACA,YAAA,IAAA,GAAA,IAAA,IAAA,EAAA;AACA,YAAA,EAAA,GAAA;AACA,kBAAA,KAAA,IADA;AAEA,mBAAA,KAAA,KAFA;AAGA,mBAAA,KAAA,KAHA;AAIA,sBAAA,KAAA,MAJA;AAKA,4BAAA,IAAA,CAAA,WAAA,EAAA,cAAA,IAAA,CAAA,QAAA,EAAA,cAAA,IAAA,CAAA,OAAA,EAAA;AALA,SAAA;AAOA,QAAA,KAAA,CACA,IADA,CACA,GADA,EACA,IAAA,CAAA,SAAA,CAAA,EAAA,CADA,EACA;AACA,UAAA,OAAA,EAAA;AACA,sBAAA,kBADA;AAEA,4BAAA;AAFA;AADA,SADA,EAOA,KAPA,CAOA,UAAA,CAAA,EAAA;AAAA,UAAA,KAAA,CAAA,MAAA,CAAA,IAAA,CAAA,CAAA;AAAA,SAPA;AAQA;AACA,KApBA;AAqBA,IAAA,KArBA,mBAqBA;AACA,WAAA,IAAA,GAAA,EAAA,EACA,KAAA,KAAA,GAAA,EADA,EAEA,KAAA,MAAA,GAAA,IAFA,EAGA,KAAA,QAAA,GAAA,KAHA;AAIA;AA1BA;AA3BA,CAAA","sourcesContent":["<template>\n    <v-content>\n        <v-container fluid fill-height>\n            <v-layout align-center justify-center>\n                <v-flex>\n                    <v-card\n                            class=\"elevation-8\">\n                        <v-toolbar\n                                dark color=\"primary lighten-1\">\n                            <v-toolbar-title>Новое объявление</v-toolbar-title>\n                        </v-toolbar>\n                        <v-card-text>\n                            <v-form\n                                    v-model=\"valid\"\n                                    ref=\"form\"\n                                    lazy-validation>\n                                <v-text-field\n                                        v-model=\"name\"\n                                        label=\"Название объявления\"\n                                        :rules=\"nameRules\"\n                                        required\n                                ></v-text-field>\n                                <v-textarea\n                                        v-model=\"descr\"\n                                        label=\"Описание\"\n                                        :rules=\"descrRules\"\n                                        required\n                                ></v-textarea>\n                                <v-text-field\n                                        v-model=\"price\"\n                                        label=\"Цена\"\n                                        :rules=\"priceRules\"\n                                        required\n                                ></v-text-field>\n                                <v-select\n                                        :items=\"items\"\n                                        item-text=\"text\"\n                                        item-value=\"value\"\n                                        label=\"Категория\"\n                                        :rules=\"selectRules\"\n                                        required\n                                ></v-select>\n                            </v-form>\n                        </v-card-text>\n                        <v-card-actions>\n                            <v-spacer></v-spacer>\n                            <v-btn\n                                    @click=\"postPost\"\n                                    :disabled=\"!valid\"\n                                    class=\"secondary\"\n                            >Разместить</v-btn>\n                            <v-btn\n                                    @click=\"clear\"\n                                    class=\"error\"\n                            >Стереть</v-btn>\n                        </v-card-actions>\n                    </v-card>\n                </v-flex>\n            </v-layout>\n        </v-container>\n    </v-content>\n</template>\n\n\n<script>\n    import axios from 'axios'\n    const url = 'http://127.0.0.1:8000/api/ads/';\n\n    export default {\n        data: () => ({\n            valid: true,\n            errors: [],\n            name: '',\n            descr: '',\n            price: '',\n            select: null,\n            items: [\n                {value: 1, text: 'Продукты'},\n                {value: 2, text: 'Электроника'},\n            ],\n            nameRules: [\n                v => !!v || 'Назовите объявление',\n                v => (v && v.length >= 10) || 'Название объявления должно содержать минимум 10 символов'\n            ],\n            descrRules: [\n                v => !!v || 'Опишите объявление'\n            ],\n            priceRules: [\n                v => !!v || 'Введите цену объявления',\n                v => (v && !isNaN(v) && /^\\d+$/.test(v))|| 'Цена должна быть целым числом'\n            ],\n            selectRules: [\n                v => !!v || \"Выберите категорию объявления\"\n            ],\n        }),\n        methods: {\n            postPost() {\n                if (this.$refs.form.validate()) {\n                    let date = new Date()\n                    const ad = {\n                        \"name\": this.name,\n                        \"descr\" : this.descr,\n                        \"price\": this.price,\n                        \"category\": this.select,\n                        \"date\": `${date.getFullYear()}-${date.getMonth()}-${date.getDate()}`,\n                    }\n                    axios\n                        .post(url, JSON.stringify(ad), {\n                            headers: {\n                                'Accept': 'application/json',\n                                'Content-Type': 'application/json',\n                            }\n                        })\n                        .catch(e => {this.errors.push(e)})\n                }\n            },\n            clear() {\n                this.name = '',\n                    this.descr = '',\n                    this.select = null,\n                    this.checkbox = false\n            },\n        }\n    }\n</script>"],"sourceRoot":"src/components/pages"}]}