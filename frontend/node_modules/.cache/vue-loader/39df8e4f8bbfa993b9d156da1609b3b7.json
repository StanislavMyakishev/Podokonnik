{"remainingRequest":"/Users/stas/Projects/Podokonnik/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/stas/Projects/Podokonnik/frontend/src/App.vue?vue&type=style&index=0&id=7ba5bd90&scoped=true&lang=css&","dependencies":[{"path":"/Users/stas/Projects/Podokonnik/frontend/src/App.vue","mtime":1563624438539},{"path":"/Users/stas/Projects/Podokonnik/frontend/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/stas/Projects/Podokonnik/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/stas/Projects/Podokonnik/frontend/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/stas/Projects/Podokonnik/frontend/node_modules/vuetify-loader/lib/loader.js","mtime":1549812933000},{"path":"/Users/stas/Projects/Podokonnik/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/stas/Projects/Podokonnik/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n#app {\n  background-color: #FFFFFF;\n}\n\n.body {\n  display: flex;\n  flex-direction: column;\n}\n\n.wrapper {\n  flex: 1 0 auto;\n}\n\n",{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0GA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <div id=\"app\">\n    <v-app class=\"body\">\n      <div class=\"wrapper\">\n        <app-header :links=\"links\"></app-header>\n        <v-content>\n          <router-view :config=\"config\" :userId=\"user.userId\"></router-view>\n        </v-content>\n      </div>\n      <app-footer></app-footer>\n    </v-app>\n    <app-error></app-error>\n  </div>\n</template>\n\n<script>\n  import Footer from '@/components/core/Footer'\n  import Header from '@/components/core/Header'\n  import axios from 'axios'\n  import router from './router/index'\n  import ErrorComp from '@/components/core/Error'\n\n  export default {\n    data() {\n      return {\n        drawer: false,\n        user: {\n          username: \"\",\n          token: \"\",\n          userId: \"\",\n        }\n      }\n    },\n    components: {\n      appFooter: Footer,\n      appHeader: Header,\n      appError: ErrorComp\n    },\n\n    computed: {\n      loggedIn() {\n        return this.user.token.length > 0;\n      },\n      links() {\n        if (this.loggedIn) {\n          return [\n            {title: 'Мои заказы', icon: 'bookmark_border', url: '/myorders'},\n            {title: 'Новый заказ', icon: 'note_add', url: '/new'},\n            {title: 'Мои заявки', icon: 'description', url: '/myrequests'},\n            {title: 'Аккаунт', icon: 'face', url: '/modify'},\n            {title: 'Выйти', icon: 'lock', url: '/'},\n          ]\n        } else {\n          return [\n            {title: 'Вход', icon: 'lock', url: '/login'},\n            {title: 'Регистрация', icon: 'face', url: '/reg'}\n          ]\n        }\n      },\n      config() {\n        return {\n          headers: {\n            Authorization: 'Token ' + this.user.token\n          }\n        }\n      }\n    },\n    mounted() {\n      if (localStorage.getItem('username') !== null) {\n        this.user.username = localStorage.getItem('username');\n        this.user.token = localStorage.getItem('token');\n        this.user.userId = localStorage.getItem('userId');\n      }\n\n      this.$root.$on('authorized', user => {\n        this.user.username = user.username;\n        this.user.token = user.token;\n        this.user.userId = user.userId;\n\n        localStorage.setItem('username', this.user.username);\n        localStorage.setItem('token', this.user.token);\n        localStorage.setItem('userId', this.user.userId);\n      });\n\n      this.$root.$on('newOrder', order => {\n        axios.post('http://127.0.0.1:8081/api/orders/', order, this.config)\n                .then(response => {\n                  router.push('/myorders')\n                })\n                .catch(error => {\n                  this.$root.$emit('error', error);\n                })\n      });\n\n      this.$root.$on('logout', () => {\n        this.user.token = '';\n        localStorage.removeItem('username');\n        localStorage.removeItem('token');\n        localStorage.removeItem('userId');\n      })\n    },\n  }\n</script>\n\n<style scoped>\n\n  #app {\n    background-color: #FFFFFF;\n  }\n\n  .body {\n    display: flex;\n    flex-direction: column;\n  }\n\n  .wrapper {\n    flex: 1 0 auto;\n  }\n\n</style>"]}]}